<ion-header class="has-shadow" [translucent]="true">
  <ion-toolbar>
    <ion-title class="font2P">Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="page-background">
  <div class="profile-container" *ngIf="currentUser">
    
    <div class="avatar-section">
      <ion-avatar>
        <img [src]="currentUser.profileImage || 'https://ionicframework.com/docs/img/demos/avatar.svg'" alt="Profile picture" />
      </ion-avatar>
      <div class="name-container">
        <h2 class="ion-text-color">{{ currentUser.fullName || currentUser.userName }}</h2>
        <ion-icon name="pencil-outline" (click)="editProfile()"></ion-icon>
      </div>
    </div>

    <div class="menu-items">


      <div class="button-container" (click)="orderHistory()">
        <div class="button-wrapper">
          <ion-icon name="time-outline" slot="start" class="input-icon"></ion-icon>
          <ion-label class="ion-text-color">Order history</ion-label>
        </div>
      </div>

      <div class="button-container" (click)="changePassword()">
        <div class="button-wrapper">
          <ion-icon name="lock-closed-outline" slot="start" class="input-icon"></ion-icon>
          <ion-label class="ion-text-color">Change password</ion-label>
        </div>
      </div>

      <div class="button-container" (click)="logout()">
        <div class="button-wrapper">
          <ion-icon name="log-out-outline" slot="start" class="input-icon"></ion-icon>
          <ion-label class="ion-text-color">Log out</ion-label>
        </div>
      </div>

      <!-- <ion-item detail="false" lines="none" button (click)="orderHistory()" class="ion-item-color">
        <ion-icon name="time-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Order history</ion-label>
      </ion-item>

      <ion-item detail="false" lines="none" button (click)="managePayment()">
        <ion-icon name="card-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Manage payment methods</ion-label>
      </ion-item>

      <ion-item detail="false" lines="none" button (click)="changePassword()">
        <ion-icon name="lock-closed-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Change password</ion-label>
      </ion-item>

      <ion-item detail="false" lines="none" button (click)="logout()">
        <ion-icon name="log-out-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Log Out</ion-label>
      </ion-item> -->

    </div>

    <div class="delete-account-container">
      <ion-button fill="clear" class="delete-button" (click)="deleteAccount()">
        <ion-icon name="person-remove-outline" slot="start"></ion-icon>
        <span class="deactivate-button">Deactivate account</span>
      </ion-button>
    </div>
    
  </div>
  
  <!-- Show loading or redirect message if no user -->
  <div class="no-user-container" *ngIf="!currentUser">
    <p>Please log in to view your profile</p>
    <ion-button expand="block" routerLink="/login">Go to Login</ion-button>
  </div>
</ion-content>

<app-tabs-pages></app-tabs-pages>
